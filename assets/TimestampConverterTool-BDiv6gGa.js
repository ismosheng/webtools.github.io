import{T as R}from"./ToolHeader-CSAKN2xS.js";import"./CodeMirrorEditor.vue_vue_type_style_index_0_scoped_202dc1f2_lang-NccLibSq.js";import{_ as W,e as r,q as X,f as y,g as N,A as Z,B as tt,c as et,w,s as $,r as f,o as _,a,b as e,t as D,d as z,i as g}from"./index-CKlJhNh4.js";const st={class:"text-tool__body"},nt={class:"main-content-grid"},ot={class:"current-time-card"},at={class:"current-time-header"},lt={class:"current-time-content"},it={class:"time-item"},rt={class:"time-value"},ct={class:"time-item"},dt={class:"time-value"},ut={class:"time-item"},mt={class:"time-value"},vt={class:"timestamp-config"},pt={class:"config-row"},_t={class:"config-item"},ft={class:"config-item"},gt={class:"converter-input-section"},Yt={class:"input-header"},Dt={class:"input-hint"},Tt={key:0},ht={key:1},Mt={key:2},yt={class:"input-actions"},wt={class:"converter-output-section"},xt={class:"output-header"},bt={class:"output-hint"},kt={key:0},Ct={key:1},St={key:2},It={__name:"TimestampConverterTool",setup(Ht){const i=r(""),v=r("seconds"),p=r("YYYY-MM-DD HH:mm:ss"),m=r(""),c=r(""),d=r(""),{isDark:H}=X(),B=r(new Date),x=r(""),b=r(""),k=r("");let C=null;const U=y(()=>({"text-tool":!0,"text-tool--dark":H.value,"text-tool--light":!H.value})),E=()=>Math.floor(Date.now()/1e3).toString(),F=()=>Date.now().toString(),j=()=>S(new Date,p.value),S=(s,t)=>{const n=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),Y=String(s.getDate()).padStart(2,"0"),o=String(s.getHours()).padStart(2,"0"),M=String(s.getMinutes()).padStart(2,"0"),I=String(s.getSeconds()).padStart(2,"0");return t.replace("YYYY",n).replace("MM",l).replace("DD",Y).replace("HH",o).replace("mm",M).replace("ss",I)},V=s=>{const t=s.trim();let n=new Date(t);if(!isNaN(n.getTime()))return n;const l=[/^(\d{4})-(\d{2})-(\d{2})\s+(\d{2}):(\d{2}):(\d{2})$/,/^(\d{4})\/(\d{2})\/(\d{2})\s+(\d{2}):(\d{2}):(\d{2})$/,/^(\d{4})-(\d{2})-(\d{2})$/,/^(\d{4})\/(\d{2})\/(\d{2})$/];for(const Y of l){const o=t.match(Y);if(o&&(o.length===7?n=new Date(parseInt(o[1]),parseInt(o[2])-1,parseInt(o[3]),parseInt(o[4]),parseInt(o[5]),parseInt(o[6])):o.length===4&&(n=new Date(parseInt(o[1]),parseInt(o[2])-1,parseInt(o[3]))),!isNaN(n.getTime())))return n}throw new Error("无法解析日期时间格式")},q=s=>{const t=parseFloat(s);if(isNaN(t))throw new Error("无效的时间戳");let n;if(v.value==="milliseconds"?n=new Date(t):n=new Date(t*1e3),isNaN(n.getTime()))throw new Error("时间戳超出有效范围");return S(n,p.value)},A=s=>{const t=V(s);return(v.value==="milliseconds"?t.getTime():Math.floor(t.getTime()/1e3)).toString()},G=s=>{const t=s.trim();if(!t)return"";if(/^\d+$/.test(t)){const n=parseFloat(t);if(t.length===10||t.length===13&&n>9466848e5)return"timestamp"}try{const n=V(t);if(!isNaN(n.getTime()))return"datetime"}catch{}return""},J=()=>{if(d.value="",m.value="",c.value="",!i.value.trim())return;const s=G(i.value);if(c.value=s,!s){d.value="无法识别输入类型，请输入时间戳或日期时间";return}try{s==="timestamp"?m.value=q(i.value):m.value=A(i.value)}catch(t){d.value=`转换失败：${t.message}`,m.value=""}};N([i,v,p],()=>{J()}),N(p,()=>{h()});const K=y(()=>d.value?d.value:i.value.trim()?c.value==="timestamp"?"已识别为时间戳，转换完成":c.value==="datetime"?"已识别为日期时间，转换完成":"等待输入...":"请输入时间戳或日期时间，系统会自动识别并转换"),L=y(()=>d.value?"mdi-alert-circle":"mdi-check-circle"),O=y(()=>d.value?"error":"success"),T=async s=>{if(s)try{await navigator.clipboard.writeText(s)}catch(t){console.error(t)}},P=()=>{i.value="",m.value="",c.value="",d.value=""},Q=()=>{Math.random()>.5?i.value=v.value==="milliseconds"?F():E():i.value=j()},h=()=>{const s=new Date;B.value=s,x.value=Math.floor(s.getTime()/1e3).toString(),b.value=s.getTime().toString(),k.value=S(s,p.value)};return h(),Z(()=>{h(),C=setInterval(h,1e3)}),tt(()=>{C&&clearInterval(C)}),(s,t)=>{const n=f("v-icon"),l=f("v-btn"),Y=f("v-btn-toggle"),o=f("v-select"),M=f("v-text-field"),I=f("v-sheet");return _(),et(I,{class:$(U.value),rounded:"xl",elevation:"0"},{default:w(()=>[a(R,{icon:"mdi-clock-outline",color:"teal",title:"时间戳转换",description:"Unix 时间戳与日期时间互转，支持秒级和毫秒级时间戳，多种日期格式。"}),e("div",st,[e("div",nt,[e("div",ot,[e("div",at,[a(n,{icon:"mdi-clock-time-four-outline",color:"primary",size:"24",class:"me-2"}),t[7]||(t[7]=e("span",{class:"current-time-title"},"当前时间",-1))]),e("div",lt,[e("div",it,[t[8]||(t[8]=e("div",{class:"time-label"},"日期时间",-1)),e("div",rt,D(k.value),1),a(l,{icon:"mdi-content-copy",size:"x-small",variant:"text",onClick:t[0]||(t[0]=u=>T(k.value)),title:"复制"})]),e("div",ct,[t[9]||(t[9]=e("div",{class:"time-label"},"时间戳（秒）",-1)),e("div",dt,D(x.value),1),a(l,{icon:"mdi-content-copy",size:"x-small",variant:"text",onClick:t[1]||(t[1]=u=>T(x.value)),title:"复制"})]),e("div",ut,[t[10]||(t[10]=e("div",{class:"time-label"},"时间戳（毫秒）",-1)),e("div",mt,D(b.value),1),a(l,{icon:"mdi-content-copy",size:"x-small",variant:"text",onClick:t[2]||(t[2]=u=>T(b.value)),title:"复制"})])])]),e("div",vt,[e("div",pt,[e("div",_t,[t[13]||(t[13]=e("label",{class:"config-label"},"时间戳单位",-1)),a(Y,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=u=>v.value=u),mandatory:"",variant:"outlined",density:"comfortable"},{default:w(()=>[a(l,{value:"seconds"},{default:w(()=>[...t[11]||(t[11]=[z("秒",-1)])]),_:1}),a(l,{value:"milliseconds"},{default:w(()=>[...t[12]||(t[12]=[z("毫秒",-1)])]),_:1})]),_:1},8,["modelValue"])]),e("div",ft,[t[14]||(t[14]=e("label",{class:"config-label"},"日期格式",-1)),a(o,{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=u=>p.value=u),items:[{title:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{title:"YYYY/MM/DD HH:mm:ss",value:"YYYY/MM/DD HH:mm:ss"},{title:"YYYY-MM-DD",value:"YYYY-MM-DD"},{title:"YYYY/MM/DD",value:"YYYY/MM/DD"}],variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])])]),e("div",gt,[e("div",Yt,[e("div",null,[t[15]||(t[15]=e("div",{class:"input-title"},"输入",-1)),e("div",Dt,[c.value==="timestamp"?(_(),g("span",Tt,"已识别：时间戳")):c.value==="datetime"?(_(),g("span",ht,"已识别：日期时间")):(_(),g("span",Mt,"自动识别时间戳或日期时间"))])]),e("div",yt,[a(l,{variant:"text",icon:"mdi-refresh",size:"small",onClick:Q,title:"填充示例"}),a(l,{variant:"text",icon:"mdi-eraser",size:"small",onClick:P,title:"清空"})])]),a(M,{modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=u=>i.value=u),variant:"outlined",density:"comfortable",placeholder:"输入时间戳（如 1704067200）或日期时间（如 2024-01-01 12:00:00）","hide-details":"",class:"converter-input"},null,8,["modelValue"])]),e("div",wt,[e("div",xt,[e("div",null,[t[16]||(t[16]=e("div",{class:"output-title"},"转换结果",-1)),e("div",bt,[c.value==="timestamp"?(_(),g("span",kt,"日期时间格式")):c.value==="datetime"?(_(),g("span",Ct,D(v.value==="milliseconds"?"毫秒级":"秒级")+"时间戳",1)):(_(),g("span",St,"等待输入..."))])]),a(l,{variant:"text",icon:"mdi-content-copy",size:"small",disabled:!m.value,onClick:t[6]||(t[6]=u=>T(m.value)),title:"复制结果"},null,8,["disabled"])]),a(M,{"model-value":m.value,variant:"outlined",density:"comfortable",placeholder:"转换结果会在此处显示",readonly:"","hide-details":"",class:"converter-output"},null,8,["model-value"]),e("div",{class:$(["converter-status",{"converter-status--error":d.value}])},[a(n,{icon:L.value,color:O.value,size:"18"},null,8,["icon","color"]),e("span",null,D(K.value),1)],2)])])])])]),_:1},8,["class"])}}},zt=W(It,[["__scopeId","data-v-cbea460c"]]);export{zt as default};
